(this["webpackJsonpctr-ocr"]=this["webpackJsonpctr-ocr"]||[]).push([[0],{146:function(e,t,n){e.exports=n(386)},151:function(e,t,n){},152:function(e,t,n){},190:function(e,t){},192:function(e,t){},219:function(e,t){},386:function(e,t,n){"use strict";n.r(t);var a,r,c=n(0),l=n.n(c),o=n(139),i=n.n(o),s=(n(151),n(19)),u=n(7),m=n(8),h=n.n(m),f=n(46),d=(n(152),n(74)),g=n(76);!function(e){e.Position="position",e.Time="time",e.Username="username",e.All="all"}(a||(a={})),function(e){e.NotStarted="not_started",e.Started="started",e.Done="done"}(r||(r={}));var p=n(142),b=n.n(p),v=n(77),E=n.n(v),x=n(145),y=n.n(x),w=n(143),k=n.n(w),N=n(47),j=n(45),O=n(144),C=n.n(O),P=function(e){return e&&"png"===e.toLowerCase()?V:Q},S=function(e){return e&&0!==e.length?e.filter((function(e){return!!e})).sort().join(ne):""},_=function(e){return e?e.split(ne).filter((function(e){return!!e})):[]},R=function(e,t,n){if(!e)return[];var a=_(e);if(!n||!t)return a;var r=_(t);return[].concat(Object(s.a)(a),Object(s.a)(r))},U=function(e,t){var n=t.filter((function(e){return!!e})),a=1/0,r=e;return n.forEach((function(t){var n=C.a.get(e,t);n<a&&(a=n,r=t)})),r},A=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0,r=e.width,c=e.height,l=M(.64,r),o=M(.265,c),i=M(.27,r),s=M(.425,c);if(n===a.All){var u=t/z,m={height:M(u,s),left:l,top:o,width:i};return m}var h=.73,f=.03,d=.27,g=.1,p=1-h-f,b={top:M(t/8,s),height:M(1/8,s)},v=o+b.top,E=b.height;if(n===a.Position){var x={height:E,left:l,top:v,width:M(g,i)};return x}var y=l+M(h,i),w=M(p,i),k=l+M(d,i),N=M(1-p-d-f,i),j=n===a.Time,O=j?y:k,C=j?w:N,P={height:E,left:O,top:v,width:C};return P},G=function(e,t){for(var n=[],a=e;a<=t;a+=1)n.push(a);return n},T=function(e){var t=a.Position,n=a.Time,r=a.Username;switch(e){case t:return{tessedit_char_whitelist:Z,tessedit_pageseg_mode:ee};case r:return{tessedit_char_whitelist:K,tessedit_pageseg_mode:te};case n:default:return{tessedit_char_whitelist:$,tessedit_pageseg_mode:te}}},M=function(e,t){return Math.floor(e*t)},J=function(e,t){for(var n=e.charCodeAt(0),a=t.charCodeAt(0),r=[],c=n;c<=a;c+=1)r.push(String.fromCharCode(c));return r},L=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];H&&(t?console.timeEnd(e):console.time(e))},z=8,F="https://".concat("sebranly",".github.io"),I="https://github.com/".concat("sebranly","/").concat("ctr-ocr"),B="".concat(I,"/blob/main/doc/guide/"),H=!1,W="".concat(F,"/").concat("ctr-ocr"),D=J("A","Z").join(""),Y=J("a","z").join(""),q="".concat(Y).concat(D),X=G(0,9).join(""),Z=G(1,z).join(""),$="".concat(X,":-"),K="".concat(q).concat(X,":-_. "),Q="image/jpeg",V="image/png",ee="10",te="7",ne="\n",ae="".concat(F,"/json/").concat("ctr-ocr","/players.json"),re="https://raw.githubusercontent.com/".concat("sebranly","/").concat("ctr-ocr","/main/src/img/examples/"),ce="".concat(I,"/tree/main/src/img/examples/full-event/"),le=function(){var e=function(e){var t=function(e){var t="".concat(e);return c.createElement("option",{key:e,label:t,value:e},t)};return c.createElement("tbody",null,je[e].map((function(n,a){var r,l,o=n.position,i=n.username,s="".concat(o,"-").concat(i);return c.createElement("tr",{key:s},c.createElement("td",null,o),Ie&&c.createElement("td",null,(r=i,(l=Se)&&_(l).includes(r)?"\ud83d\udc64":"\ud83e\udd16")),c.createElement("td",null,c.createElement("select",{disabled:be,onChange:qe(e,a),value:i},function(){var e=_(Se).sort();if(!Ie)return e.map(t);var n=_(Ae).sort();return c.createElement(c.Fragment,null,c.createElement("optgroup",{key:"human",label:"Human"},e.map(t)),c.createElement("optgroup",{key:"cpus",label:"CPUs"},n.map(t)))}())))})))},t=function(t){var n="Race ".concat(t+1),a=function(e){var t={correct:!1,errMsg:""};return e.some((function(e){return!e}))?(t.errMsg="At least one username is missing",t):Object(j.uniq)(e).length!==e.length?(t.errMsg="At least one username is duplicated",t):(t.correct=!0,t)}(je[t].map((function(e){return e.username})));return c.createElement("div",{key:t},c.createElement("h3",null,n),function(e){if(!ne||ne.length<=e)return null;var t=N.isMobile?"img-show max-width-100":"img-show max-width-45";return c.createElement("img",{alt:"Cropped Results",className:t,src:ne[e]})}(t),c.createElement("div",{className:"flex-container results"},function(t){return c.createElement("table",{className:"flex-1"},c.createElement("thead",null,c.createElement("tr",null,c.createElement("th",null,"Position"),Ie&&c.createElement("th",null,"Type"),c.createElement("th",null,"Name"))),e(t))}(t)),!a.correct&&c.createElement("div",{className:"red"},a.errMsg))},n=function(){if(!Je||0===Object.keys(Je).length)return c.createElement("div",{className:"text-center mb"},"Loading CPUs...");var e="".concat(B,"CPUs.md"),t=Object.keys(Je),n=We?"Automatically activated bots because ".concat(He," human player(s) was/were filled out of a total of ").concat(se," players"):"Check this if there were bots during the race";return c.createElement(c.Fragment,null,c.createElement("div",{className:"text-center mb"},c.createElement("input",{name:"includeCpuPlayers",type:"checkbox",checked:Ie,onChange:Xe,disabled:We}),c.createElement("div",{className:"ml inline"},n)),Ie&&c.createElement(c.Fragment,null,c.createElement("div",{className:"text-center mb"},"Bots are automatically determined based on the language and cannot be edited"),c.createElement("div",{className:"ml block mb"},"For more information, please refer to the"," ",c.createElement("a",{href:e,rel:"noopener noreferrer",title:"Guide about CPUs",target:"_blank"},"CPUs guide")),c.createElement("div",{className:"inline mr"},"Language in images"),c.createElement("select",{disabled:be,onChange:Ye,value:fe},t.map((function(e){var t="".concat(e);return c.createElement("option",{key:e,label:t,value:e},t)}))),c.createElement("textarea",{className:"textarea-".concat($e),disabled:!0,placeholder:"Loading CPUs...",rows:z,value:Ae})))},l=function(){var e=Object(f.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:we(!0),ve(!1),fetch(ae).then((function(e){return e.json()})).then((function(e){Le(e),Ge(S(e.en))}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),o=function(){var e=Object(f.a)(h.a.mark((function e(){var t,n,c,l,o,i,s,u;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ye){e.next=2;break}return e.abrupt("return");case 2:return ve(!0),O(r.Started),F("Initialization..."),Oe([]),le([]),t=Object(g.createScheduler)(),n=Object(g.createWorker)({}),t.addWorker(n),e.next=12,n.load();case 12:return e.next=14,n.loadLanguage("eng");case 14:return e.next=16,n.initialize("eng");case 16:return c=T(a.Username),e.next=19,n.setParameters(c);case 19:l=G(0,se-1),o=function(){var e=Object(f.a)(h.a.mark((function e(n,a,r,c){var l,o,i,s,u,m,f,d,g,p,v;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l=t,o=A(r,n,a),i=r.extension,s=P(i),u=c.crop(o.left,o.top,o.width,o.height),m={count:2,type:s},e.next=8,u.getBufferAsync(s);case 8:return f=e.sent,e.next=11,b()(f,m).then((function(e){return[e[0].rgb(),e[1].rgb()]}));case 11:return d=e.sent,g=d[0][0]<d[1][0]&&d[0][1]<d[1][1]&&d[0][2]<d[1][2],p=g?u.invert():u,e.next=16,p.getBufferAsync(s);case 16:return v=e.sent,e.abrupt("return",l.addJob("recognize",v));case 18:case"end":return e.stop()}}),e)})));return function(t,n,a,r){return e.apply(this,arguments)}}(),i=[],s=[],u=0;case 24:if(!(u<$.length)){e.next=36;break}return e.prev=25,e.delegateYield(h.a.mark((function e(){var t,n,r,c,m,f,d,g,p,b,v,x,y,w,k,N,j,O;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="Image ".concat(u+1," out of ").concat($.length,"..."),F(t),L("imgRead"),e.next=5,E.a.read($[u]);case 5:return n=e.sent,L("imgRead",!0),r=n.bitmap.height,(c=r>1e3)&&L("imgResize"),m=c?n.resize(E.a.AUTO,1e3):n,c&&L("imgResize",!0),L("imgRotate"),f=m.rotate(-6.2),L("imgRotate",!0),L("imgRest"),d=f.bitmap.height,g=f.bitmap.width,p=f.getExtension(),v=A(b={height:d,extension:p,width:g},se,a.All),x=f.clone(),x.crop(v.left,v.top,v.width,v.height).getBase64(Q,(function(e,t){s.push(t)})),y=f.grayscale(),L("imgRest",!0),L("promisesCreation"),w=l.map((function(e){return o(e,a.Username,b,y.clone())})),L("promisesCreation",!0),L("promisesResolve"),e.next=32,Promise.all(w);case 32:k=e.sent,L("promisesResolve",!0),N=k.map((function(e){return e.data.text.replace(/\n/g,"").replace(/ /g,"")})),j=[],O=R(Se,Ae,Ie),l.forEach((function(e){var t=N[e],n={username:U(t,O),position:e+1};j.push(n)})),i.push(j);case 39:case"end":return e.stop()}}),e)}))(),"t0",27);case 27:e.next=33;break;case 29:e.prev=29,e.t1=e.catch(25),m=e.t1,H&&console.log(m),ve(!1);case 33:u++,e.next=24;break;case 36:return Oe(i),le(s),O(r.Done),F(""),ve(!1),e.next=43,t.terminate();case 43:case"end":return e.stop()}var m}),e,null,[[25,29]])})));return function(){return e.apply(this,arguments)}}(),i=y()(),m=i.width,p=i.height,v=c.useState(r.NotStarted),x=Object(u.a)(v,2),w=x[0],O=x[1],C=c.useState(""),M=Object(u.a)(C,2),J=M[0],F=M[1],I=c.useState([]),D=Object(u.a)(I,2),Y=D[0],q=D[1],X=c.useState([]),Z=Object(u.a)(X,2),$=Z[0],K=Z[1],ee=c.useState([]),te=Object(u.a)(ee,2),ne=te[0],le=te[1],oe=c.useState(z),ie=Object(u.a)(oe,2),se=ie[0],ue=ie[1],me=c.useState("en"),he=Object(u.a)(me,2),fe=he[0],de=he[1],ge=c.useState(!0),pe=Object(u.a)(ge,2),be=pe[0],ve=pe[1],Ee=c.useState(!1),xe=Object(u.a)(Ee,2),ye=xe[0],we=xe[1],ke=c.useState([]),Ne=Object(u.a)(ke,2),je=Ne[0],Oe=Ne[1],Ce=c.useState(""),Pe=Object(u.a)(Ce,2),Se=Pe[0],_e=Pe[1],Re=c.useState("Loading CPUs..."),Ue=Object(u.a)(Re,2),Ae=Ue[0],Ge=Ue[1],Te=c.useState({}),Me=Object(u.a)(Te,2),Je=Me[0],Le=Me[1],ze=c.useState(!1),Fe=Object(u.a)(ze,2),Ie=Fe[0],Be=Fe[1],He=_(Se).length,We=He<se;c.useEffect((function(){l()}),[]),c.useEffect((function(){if(!(Y.length<1)){var e=[];Object(j.sortBy)(Y,(function(e){return e.name})).forEach((function(t){return e.push(URL.createObjectURL(t))})),K(e)}}),[Y]),c.useEffect((function(){We&&!Ie&&Be(!0)}),[We,Ie]);var De=function(e){q(Object(s.a)(e.target.files)),Oe([])},Ye=function(e){de(e.target.value),Ge(S(Je[e.target.value]))},qe=function(e,t){return function(n){if(je&&!(je.length<e)){var a=Object(s.a)(je);a[e][t].username=n.target.value,Oe(a)}}},Xe=function(e){Be(e.target.checked)},Ze=G(2,z),$e=N.isMobile?"mobile":"desktop",Ke=be?"bg-grey":"bg-white";return c.createElement(d.b,null,c.createElement(d.a,null,c.createElement("title",null,"Crash Team Results"),c.createElement("link",{rel:"canonical",href:W})),c.createElement("div",{className:"main"},c.createElement("h1",null,"Crash Team Results"),c.createElement("div",{className:"w3-light-grey"}),w===r.Done&&c.createElement(k.a,{width:m,height:p,numberOfPieces:800,recycle:!1}),c.createElement("div",{className:"center main-content-".concat($e," ").concat(Ke)},w!==r.Started?null:c.createElement("div",{className:"progress-bar"},c.createElement("div",{className:"progress-bar-value"}),c.createElement("div",{className:"progress-bar-text"},J)),c.createElement("h2",null,"Players"),c.createElement("h3",null,"Number of players"),c.createElement("div",{className:"text-center mb"},"This includes CPUs if any"),c.createElement("select",{disabled:be,onChange:function(e){ue(Number(e.target.value))},value:se},Ze.map((function(e){var t="".concat(e," players");return c.createElement("option",{key:e,label:t,value:e},t)}))),c.createElement("h3",null,"Human Players"),c.createElement("div",{className:"text-center mb"},"Type all human players present in the races. Type one username per line."),c.createElement("textarea",{className:"textarea-".concat($e),disabled:be,placeholder:"Hy\xe8ne_JurassX\nAlexiz\nColonel_Hay\nTATANE",rows:se,value:Se,onChange:function(e){_e(e.currentTarget.value)}}),function(){if(0===He)return null;var e="".concat(re,"IMG1.JPG"),a="".concat(re,"IMG1.PNG"),r="".concat(B,"Images.md");return c.createElement(c.Fragment,null,c.createElement(c.Fragment,null,c.createElement("h3",null,"CPUs"),n()),c.createElement("h2",null,"Images"),c.createElement("div",{className:"text-center mb"},c.createElement("div",{className:"ml block mb bold"},"Screenshots will be ordered alphabetically by name"),c.createElement("div",{className:"ml block mb"},"Select screenshots in JPG/JPEG or PNG format, taken right when Returning to Lobby was around 14 seconds"),c.createElement("div",{className:"ml block mb"},"Examples of valid screenshots:"," ",c.createElement("a",{href:e,rel:"noopener noreferrer",title:"Example of valid JPEG screenshot",target:"_blank"},"JPG/JPEG")," ","and"," ",c.createElement("a",{href:a,rel:"noopener noreferrer",title:"Example of valid PNG screenshot",target:"_blank"},"PNG")),c.createElement("div",{className:"ml block mb"},"You can upload multiple images at once, as in this"," ",c.createElement("a",{href:ce,rel:"noopener noreferrer",title:"Example of a valid 10-race event",target:"_blank"},"10-race example")),c.createElement("div",{className:"ml block mb"},"For more information, please refer to the"," ",c.createElement("a",{href:r,rel:"noopener noreferrer",title:"Guide about Images",target:"_blank"},"images guide")),c.createElement("input",{className:"inline mt",disabled:be,type:"file",multiple:!0,accept:[Q,V].join(", "),onChange:De}),c.createElement("input",{className:"inline-block ml",type:"button",value:"Start recognition",disabled:be||!$||0===$.length,onClick:o})),N.isMobile?$.map((function(e,t){return c.createElement("img",{alt:"tbd",className:"img-full max-width-100 block",key:"".concat(e,"-").concat(t),src:e})})):c.createElement("div",{className:"flex-container center"},$.map((function(e,t){return c.createElement("img",{alt:"tbd",className:"img-full max-width-45 flex-1",key:"".concat(e,"-").concat(t),src:e})}))),je&&0!==je.length?c.createElement(c.Fragment,null,c.createElement("div",{className:"center"},c.createElement("h2",null,"Results"),je.map((function(e,n){return t(n)})))):null)}()),c.createElement("div",{className:"mt2 text-center"},"v".concat("1.0.2"))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(le,null),","),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[146,1,2]]]);
//# sourceMappingURL=main.06e5cc0d.chunk.js.map