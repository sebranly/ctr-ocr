(this["webpackJsonpctr-ocr"]=this["webpackJsonpctr-ocr"]||[]).push([[0],{140:function(e,t,n){e.exports=n(376)},145:function(e,t,n){},146:function(e,t,n){},187:function(e,t){},189:function(e,t){},216:function(e,t){},376:function(e,t,n){"use strict";n.r(t);var r=n(2),a=n.n(r),o=n(135),c=n.n(o),i=(n(145),n(45)),s=n(74),u=n(8),l=n.n(u),g=n(71),m=(n(146),n(72)),h=n(18),d=n(138),p=n.n(d),f=n(139),b=n.n(f),v=n(21),E=n.n(v),w=["caso-pyro01","stin_wz","ZouGui28","francois24540","DGregson97","nessanumen","AlexKenshin_33","CrazyLittleJazzy","mmartin_m","Dr N. Tropy","Kity_Panda","Jakubeq1_","Assistant de laboratoire","B\xe9b\xe9 N. Tropy","Faux Crash","giomastik","MarioAlfie123","kimmyy043","Mav15151515","Axe34070","Stew"],x=function(e){var t=1/0,n=e;return w.forEach((function(r){var a=p.a.get(e,r);a<t&&(t=a,n=r)})),n},y=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0,r=e.width,a=e.height,o=parseInt((.64*r).toString(),10),c=parseInt((.265*a).toString(),10),i=parseInt((.27*r).toString(),10),s=parseInt((.425*a).toString(),10),u=.73,l=.03,g=.27,m=1-u-l,h={top:parseInt((t/8*s).toString(),10),height:parseInt((1/8*s).toString(),10)},d=c+h.top,p=h.height,f=o+parseInt((u*i).toString(),10),b=parseInt((m*i).toString(),10),v=o+parseInt((g*i).toString(),10),E=parseInt(((1-m-g-l)*i).toString(),10),w=n?f:v,x=n?b:E,y={left:w,top:d,width:x,height:p};return y},I="_-abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789:.",k=function(){var e=Object(h.createScheduler)(),t=Object(h.createScheduler)(),n=Object(h.createWorker)({logger:function(e){return console.log(e)}}),a=Object(h.createWorker)({logger:function(e){return console.log(e)}}),o=Object(h.createWorker)({logger:function(e){return console.log(e)}}),c=Object(h.createWorker)({logger:function(e){return console.log(e)}}),u=function(){var r=Object(g.a)(l.a.mark((function r(){var i,u,m,h,d,p,f,w,k,S,O,j,J,P,B,G;return l.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return _(!0),(i=document.getElementById("img-show"))&&(i.innerHTML=""),v("Loading for ".concat(M,"...")),r.next=6,n.load();case 6:return r.next=8,a.load();case 8:return r.next=10,n.loadLanguage("eng");case 10:return r.next=12,a.loadLanguage("eng");case 12:return r.next=14,n.initialize("eng");case 14:return r.next=16,a.initialize("eng");case 16:return r.next=18,o.load();case 18:return r.next=20,c.load();case 20:return r.next=22,o.loadLanguage("eng");case 22:return r.next=24,c.loadLanguage("eng");case 24:return r.next=26,o.initialize("eng");case 26:return r.next=28,c.initialize("eng");case 28:return r.next=30,n.setParameters({tessedit_char_whitelist:"0123456789:-"});case 30:return r.next=32,a.setParameters({tessedit_char_whitelist:"0123456789:-"});case 32:return r.next=34,o.setParameters({tessedit_char_whitelist:I});case 34:return r.next=36,c.setParameters({tessedit_char_whitelist:I});case 36:return e.addWorker(n),e.addWorker(a),t.addWorker(o),t.addWorker(c),u=[0,1,2,3,4,5,6,7],m=function(){var n=Object(g.a)(l.a.mark((function n(r,a,o,c){var i,s,u,g,m,h,d,f,v,w;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=p.clone(),s=a?e:t,a?"time":"name",u=y(o,r,a),(g=i.crop(u.left,u.top,u.width,u.height)).getBase64(E.a.MIME_JPEG,(function(e,t){var n=document.createElement("img");n.setAttribute("src",t);var r=document.getElementById("img-show");r&&r.appendChild(n)})),m={count:2,type:"image/jpeg"},n.next=9,g.getBufferAsync(E.a.MIME_JPEG);case 9:return h=n.sent,n.next=12,b()(h,m).then((function(e){return console.log("\ud83d\ude80 ~ rgb ~ colors",r,e),[e[0].rgb(),e[1].rgb()]}));case 12:return d=n.sent,f=d[0][0]<d[1][0]&&d[0][1]<d[1][1]&&d[0][2]<d[1][2],v=f?g.invert():g,n.next=17,v.getBufferAsync(E.a.MIME_JPEG);case 17:return w=n.sent,n.abrupt("return",s.addJob("recognize",w));case 19:case"end":return n.stop()}}),n)})));return function(e,t,r,a){return n.apply(this,arguments)}}(),h="https://raw.githubusercontent.com/sebranly/ctr-ocr/main/src/img/input/IMG".concat(M,".JPG"),r.next=45,E.a.read(h);case 45:return d=r.sent,(p=d.rotate(-6.2).grayscale()).getBase64(E.a.MIME_JPEG,(function(e,t){var n=document.createElement("img");n.setAttribute("src",t);var r=document.getElementById("img-show");r&&r.appendChild(n)})),f=p.bitmap.width,w=p.bitmap.height,k={width:f,height:w},console.log("info.width",k.width,"info.height",k.height),S=u.map((function(e){return m(e,!0,k,p)})),O=u.map((function(e){return m(e,!1,k,p)})),r.next=56,Promise.all([].concat(Object(s.a)(O),Object(s.a)(S)));case 56:j=r.sent,J=j.map((function(e){return e.data.text.replace(/\n/g,"").replace(/ /g,"")})),P=J.slice(0,8),B=J.slice(8),G=[],u.forEach((function(e){var t=P[e],n={g:t,player:x(t),time:B[e]};G.push(n)})),v(JSON.stringify(G)),_(!1);case 64:case"end":return r.stop()}}),r)})));return function(){return r.apply(this,arguments)}}(),d=r.useState("Loading..."),p=Object(i.a)(d,2),f=p[0],v=p[1],w=r.useState(!0),k=Object(i.a)(w,2),S=k[0],_=k[1],O=r.useState(1),j=Object(i.a)(O,2),M=j[0],J=j[1];r.useEffect((function(){u()}),[M]);var P="https://raw.githubusercontent.com/sebranly/ctr-ocr/main/src/img/input/IMG".concat(M,".JPG");return r.createElement(m.b,null,r.createElement(m.a,null,r.createElement("title",null,"CTR OCR"),r.createElement("link",{rel:"canonical",href:"https://sebranly.github.io/ctr-ocr"})),r.createElement("div",{className:"main"},r.createElement("h1",{className:"white"},"CTR OCR"),r.createElement("select",{disabled:S,onChange:function(e){J(Number(e.target.value))}},r.createElement("option",{label:"1",value:"1"}),r.createElement("option",{label:"2",value:"2"}),r.createElement("option",{label:"3",value:"3"}),r.createElement("option",{label:"4",value:"4"}),r.createElement("option",{label:"5",value:"5"})),r.createElement("img",{alt:"Example ".concat(M),src:P}),r.createElement("div",null,f),r.createElement("div",{id:"img-show"})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(a.a.createElement(k,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[140,1,2]]]);
//# sourceMappingURL=main.0a82ed87.chunk.js.map