(this["webpackJsonpctr-ocr"]=this["webpackJsonpctr-ocr"]||[]).push([[0],{155:function(e,t,n){e.exports=n(397)},160:function(e,t,n){},161:function(e,t,n){},199:function(e,t){},201:function(e,t){},226:function(e,t){},287:function(e,t){},289:function(e,t){},397:function(e,t,n){"use strict";n.r(t);var a,r,c=n(0),l=n.n(c),o=n(147),i=n.n(o),s=(n(160),n(24)),u=n(9),m=n(2),f=n.n(m),h=n(23),d=(n(161),n(75)),g=n(77);!function(e){e.Position="position",e.Time="time",e.Username="username",e.All="all"}(a||(a={})),function(e){e.NotStarted="not_started",e.Started="started",e.Done="done"}(r||(r={}));var p=n(150),b=n.n(p),v=n(78),E=n.n(v),x=n(154),y=n.n(x),k=n(151),w=n.n(k),N=n(47),j=n(152),C=n.n(j),P=n(153),O=function(e){return e&&"png"===e.toLowerCase()?te:ee},S=function(e){return e&&0!==e.length?e.filter((function(e){return!!e})).sort().join(re):""},_=function(e){return e?e.split(re).filter((function(e){return!!e})):[]},R=function(e,t,n){if(!e)return[];var a=_(e);if(!n||!t)return a;var r=_(t);return[].concat(Object(s.a)(a),Object(s.a)(r))},G=function(e,t){var n=t.filter((function(e){return!!e})),a=1/0,r=e;return n.forEach((function(t){var n=C.a.get(e,t);n<a&&(a=n,r=t)})),r},A=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0,r=e.width,c=e.height,l=M(.64,r),o=M(.265,c),i=M(.27,r),s=M(.425,c);if(n===a.All){var u=t/L,m={height:M(u,s),left:l,top:o,width:i};return m}var f=.73,h=.03,d=.27,g=.1,p=1-f-h,b={top:M(t/8,s),height:M(1/8,s)},v=o+b.top,E=b.height;if(n===a.Position){var x={height:E,left:l,top:v,width:M(g,i)};return x}var y=l+M(f,i),k=M(p,i),w=l+M(d,i),N=M(1-p-d-h,i),j=n===a.Time,C=j?y:w,P=j?k:N,O={height:E,left:C,top:v,width:P};return O},U=function(e,t){for(var n=[],a=e;a<=t;a+=1)n.push(a);return n},T=function(e){var t=a.Position,n=a.Time,r=a.Username;switch(e){case t:return{tessedit_char_whitelist:K,tessedit_pageseg_mode:ne};case r:return{tessedit_char_whitelist:V,tessedit_pageseg_mode:ae};case n:default:return{tessedit_char_whitelist:Q,tessedit_pageseg_mode:ae}}},M=function(e,t){return Math.floor(e*t)},I=function(e,t){for(var n=e.charCodeAt(0),a=t.charCodeAt(0),r=[],c=n;c<=a;c+=1)r.push(String.fromCharCode(c));return r},J=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];D&&(t?console.timeEnd(e):console.time(e))},z=function(e){return e?e.split(".")[0]:""},F=function(e){return 0===e.length?[]:1===e.length?e:e.sort((function(e,t){var n=e.name,a=t.name;return function(e,t){var n=/[^a-zA-Z]/g,a=/[^0-9]/g,r=e.replace(n,""),c=t.replace(n,"");if(r===c){var l=parseInt(e.replace(a,""),10),o=parseInt(t.replace(a,""),10);return l===o?0:l>o?1:-1}return r>c?1:-1}(z(n),z(a))}))},L=8,B="https://".concat("sebranly",".github.io"),H="https://github.com/".concat("sebranly","/").concat("ctr-ocr"),W="".concat(H,"/blob/main/doc/guide/"),D=!1,Z="".concat(B,"/").concat("ctr-ocr"),Y=I("A","Z").join(""),q=I("a","z").join(""),X="".concat(q).concat(Y),$=U(0,9).join(""),K=U(1,L).join(""),Q="".concat($,":-"),V="".concat(X).concat($,":-_. "),ee="image/jpeg",te="image/png",ne="10",ae="7",re="\n",ce="".concat(B,"/json/").concat("ctr-ocr","/players.json"),le="https://raw.githubusercontent.com/".concat("sebranly","/").concat("ctr-ocr","/main/src/img/examples/"),oe="".concat(H,"/tree/main/src/img/examples/full-event/"),ie=function(){var e=function(e){var t=function(e){var t="".concat(e);return c.createElement("option",{key:e,label:t,value:e},t)};return c.createElement("tbody",null,Pe[e].map((function(n,a){var r,l,o=n.position,i=n.username,s="".concat(o,"-").concat(i);return c.createElement("tr",{key:s},c.createElement("td",null,o),He&&c.createElement("td",null,(r=i,(l=Re)&&_(l).includes(r)?"\ud83d\udc64":"\ud83e\udd16")),c.createElement("td",null,c.createElement("select",{disabled:Ee,onChange:Xe(e,a),value:i},function(){var e=_(Re).sort();if(!He)return e.map(t);var n=_(Te).sort();return c.createElement(c.Fragment,null,c.createElement("optgroup",{key:"human",label:"Human"},e.map(t)),c.createElement("optgroup",{key:"cpus",label:"CPUs"},n.map(t)))}())))})))},t=function(t){var n="Race ".concat(t+1),a=function(e){var t={correct:!1,errMsg:""};return e.some((function(e){return!e}))?(t.errMsg="At least one username is missing",t):Object(P.uniq)(e).length!==e.length?(t.errMsg="At least one username is duplicated",t):(t.correct=!0,t)}(Pe[t].map((function(e){return e.username})));return c.createElement("div",{key:t},c.createElement("h3",null,n),function(e){if(!re||re.length<=e)return null;var t=N.isMobile?"img-show max-width-100":"img-show max-width-45";return c.createElement("img",{alt:"Cropped Results",className:t,src:re[e]})}(t),c.createElement("div",{className:"flex-container results"},function(t){return c.createElement("table",{className:"flex-1"},c.createElement("thead",null,c.createElement("tr",null,c.createElement("th",null,"Position"),He&&c.createElement("th",null,"Type"),c.createElement("th",null,"Name"))),e(t))}(t)),!a.correct&&c.createElement("div",{className:"red"},a.errMsg))},n=function(){if(!ze||0===Object.keys(ze).length)return c.createElement("div",{className:"text-center mb"},"Loading CPUs...");var e="".concat(W,"CPUs.md"),t=Object.keys(ze),n=Ze?"Automatically activated bots because ".concat(De," human player(s) was/were filled out of a total of ").concat(me," players"):"Check this if there were bots during the race";return c.createElement(c.Fragment,null,c.createElement("div",{className:"text-center mb"},c.createElement("input",{name:"includeCpuPlayers",type:"checkbox",checked:He,onChange:$e,disabled:Ze}),c.createElement("div",{className:"ml inline"},n)),He&&c.createElement(c.Fragment,null,c.createElement("div",{className:"text-center mb"},"Bots are automatically determined based on the language and cannot be edited"),c.createElement("div",{className:"ml block mb"},"For more information, please refer to the"," ",c.createElement("a",{href:e,rel:"noopener noreferrer",title:"Guide about CPUs",target:"_blank"},"CPUs guide")),c.createElement("div",{className:"inline mr"},"Language in images"),c.createElement("select",{disabled:Ee,onChange:qe,value:ge},t.map((function(e){var t="".concat(e);return c.createElement("option",{key:e,label:t,value:e},t)}))),c.createElement("textarea",{className:"textarea-".concat(Qe),disabled:!0,placeholder:"Loading CPUs...",rows:L,value:Te})))},l=function(){var e=Object(h.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Ne(!0),xe(!1),fetch(ce).then((function(e){return e.json()})).then((function(e){Fe(e),Me(S(e.en))}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),o=function(){var e=Object(h.a)(f.a.mark((function e(){var t,n,c,l,o,i,s,u;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(we){e.next=2;break}return e.abrupt("return");case 2:return xe(!0),j(r.Started),z("Initialization..."),Oe([]),ie([]),t=Object(g.createScheduler)(),n=Object(g.createWorker)({}),t.addWorker(n),e.next=12,n.load();case 12:return e.next=14,n.loadLanguage("eng");case 14:return e.next=16,n.initialize("eng");case 16:return c=T(a.Username),e.next=19,n.setParameters(c);case 19:l=U(0,me-1),o=function(){var e=Object(h.a)(f.a.mark((function e(n,a,r,c){var l,o,i,s,u,m,h,d,g,p,v;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l=t,o=A(r,n,a),i=r.extension,s=O(i),u=c.crop(o.left,o.top,o.width,o.height),m={count:2,type:s},e.next=8,u.getBufferAsync(s);case 8:return h=e.sent,e.next=11,b()(h,m).then((function(e){return[e[0].rgb(),e[1].rgb()]}));case 11:return d=e.sent,g=d[0][0]<d[1][0]&&d[0][1]<d[1][1]&&d[0][2]<d[1][2],p=g?u.invert():u,e.next=16,p.getBufferAsync(s);case 16:return v=e.sent,e.abrupt("return",l.addJob("recognize",v));case 18:case"end":return e.stop()}}),e)})));return function(t,n,a,r){return e.apply(this,arguments)}}(),i=[],s=[],u=0;case 24:if(!(u<Q.length)){e.next=36;break}return e.prev=25,e.delegateYield(f.a.mark((function e(){var t,n,r,c,m,h,d,g,p,b,v,x,y,k,w,N,j,C;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="Image ".concat(u+1," out of ").concat(Q.length,"..."),z(t),J("imgRead"),e.next=5,E.a.read(Q[u]);case 5:return n=e.sent,J("imgRead",!0),r=n.bitmap.height,(c=r>1e3)&&J("imgResize"),m=c?n.resize(E.a.AUTO,1e3):n,c&&J("imgResize",!0),J("imgRotate"),h=m.rotate(-6.2),J("imgRotate",!0),J("imgRest"),d=h.bitmap.height,g=h.bitmap.width,p=h.getExtension(),v=A(b={height:d,extension:p,width:g},me,a.All),x=h.clone(),x.crop(v.left,v.top,v.width,v.height).getBase64(ee,(function(e,t){s.push(t)})),y=h.grayscale(),J("imgRest",!0),J("promisesCreation"),k=l.map((function(e){return o(e,a.Username,b,y.clone())})),J("promisesCreation",!0),J("promisesResolve"),e.next=32,Promise.all(k);case 32:w=e.sent,J("promisesResolve",!0),N=w.map((function(e){return e.data.text.replace(/\n/g,"").replace(/ /g,"")})),j=[],C=R(Re,Te,He),l.forEach((function(e){var t=N[e],n={username:G(t,C),position:e+1};j.push(n)})),i.push(j);case 39:case"end":return e.stop()}}),e)}))(),"t0",27);case 27:e.next=33;break;case 29:e.prev=29,e.t1=e.catch(25),m=e.t1,D&&console.log(m),xe(!1);case 33:u++,e.next=24;break;case 36:return Oe(i),ie(s),j(r.Done),z(""),xe(!1),e.next=43,t.terminate();case 43:case"end":return e.stop()}var m}),e,null,[[25,29]])})));return function(){return e.apply(this,arguments)}}(),i=y()(),m=i.width,p=i.height,v=c.useState(r.NotStarted),x=Object(u.a)(v,2),k=x[0],j=x[1],C=c.useState(""),M=Object(u.a)(C,2),I=M[0],z=M[1],B=c.useState([]),Y=Object(u.a)(B,2),q=Y[0],X=Y[1],$=c.useState([]),K=Object(u.a)($,2),Q=K[0],V=K[1],ne=c.useState([]),ae=Object(u.a)(ne,2),re=ae[0],ie=ae[1],se=c.useState(L),ue=Object(u.a)(se,2),me=ue[0],fe=ue[1],he=c.useState("en"),de=Object(u.a)(he,2),ge=de[0],pe=de[1],be=c.useState(!0),ve=Object(u.a)(be,2),Ee=ve[0],xe=ve[1],ye=c.useState(!1),ke=Object(u.a)(ye,2),we=ke[0],Ne=ke[1],je=c.useState([]),Ce=Object(u.a)(je,2),Pe=Ce[0],Oe=Ce[1],Se=c.useState(""),_e=Object(u.a)(Se,2),Re=_e[0],Ge=_e[1],Ae=c.useState("Loading CPUs..."),Ue=Object(u.a)(Ae,2),Te=Ue[0],Me=Ue[1],Ie=c.useState({}),Je=Object(u.a)(Ie,2),ze=Je[0],Fe=Je[1],Le=c.useState(!1),Be=Object(u.a)(Le,2),He=Be[0],We=Be[1],De=_(Re).length,Ze=De<me;c.useEffect((function(){l()}),[]),c.useEffect((function(){if(!(q.length<1)){var e=[];F(q).forEach((function(t){e.push(URL.createObjectURL(t))})),V(e)}}),[q]),c.useEffect((function(){Ze&&!He&&We(!0)}),[Ze,He]);var Ye=function(e){X(Object(s.a)(e.target.files)),Oe([])},qe=function(e){pe(e.target.value),Me(S(ze[e.target.value]))},Xe=function(e,t){return function(n){if(Pe&&!(Pe.length<e)){var a=Object(s.a)(Pe);a[e][t].username=n.target.value,Oe(a)}}},$e=function(e){We(e.target.checked)},Ke=U(2,L),Qe=N.isMobile?"mobile":"desktop",Ve=Ee?"bg-grey":"bg-white";return c.createElement(d.b,null,c.createElement(d.a,null,c.createElement("title",null,"Crash Team Results"),c.createElement("link",{rel:"canonical",href:Z})),c.createElement("div",{className:"main"},c.createElement("h1",null,"Crash Team Results"),c.createElement("div",{className:"w3-light-grey"}),k===r.Done&&c.createElement(w.a,{width:m,height:p,numberOfPieces:800,recycle:!1}),c.createElement("div",{className:"center main-content-".concat(Qe," ").concat(Ve)},k!==r.Started?null:c.createElement("div",{className:"progress-bar"},c.createElement("div",{className:"progress-bar-value"}),c.createElement("div",{className:"progress-bar-text"},I)),c.createElement("h2",null,"Players"),c.createElement("h3",null,"Number of players"),c.createElement("div",{className:"text-center mb"},"This includes CPUs if any"),c.createElement("select",{disabled:Ee,onChange:function(e){fe(Number(e.target.value))},value:me},Ke.map((function(e){var t="".concat(e," players");return c.createElement("option",{key:e,label:t,value:e},t)}))),c.createElement("h3",null,"Human Players"),c.createElement("div",{className:"text-center mb"},"Type all human players present in the races. Type one username per line."),c.createElement("textarea",{className:"textarea-".concat(Qe),disabled:Ee,placeholder:"Hy\xe8ne_JurassX\nAlexiz\nColonel_Hay\nTATANE",rows:me,value:Re,onChange:function(e){Ge(e.currentTarget.value)}}),function(){if(0===De)return null;var e="".concat(le,"IMG1.JPG"),a="".concat(le,"IMG1.PNG"),r="".concat(W,"Images.md");return c.createElement(c.Fragment,null,c.createElement(c.Fragment,null,c.createElement("h3",null,"CPUs"),n()),c.createElement("h2",null,"Images"),c.createElement("div",{className:"text-center mb"},c.createElement("div",{className:"ml block mb bold"},"Screenshots will be ordered alphabetically by name"),c.createElement("div",{className:"ml block mb"},"Select screenshots in JPG/JPEG or PNG format, taken right when Returning to Lobby was around 14 seconds"),c.createElement("div",{className:"ml block mb"},"Examples of valid screenshots:"," ",c.createElement("a",{href:e,rel:"noopener noreferrer",title:"Example of valid JPEG screenshot",target:"_blank"},"JPG/JPEG")," ","and"," ",c.createElement("a",{href:a,rel:"noopener noreferrer",title:"Example of valid PNG screenshot",target:"_blank"},"PNG")),c.createElement("div",{className:"ml block mb"},"You can upload multiple images at once, as in this"," ",c.createElement("a",{href:oe,rel:"noopener noreferrer",title:"Example of a valid 10-race event",target:"_blank"},"10-race example")),c.createElement("div",{className:"ml block mb"},"For more information, please refer to the"," ",c.createElement("a",{href:r,rel:"noopener noreferrer",title:"Guide about Images",target:"_blank"},"images guide")),c.createElement("input",{className:"inline mt",disabled:Ee,type:"file",multiple:!0,accept:[ee,te].join(", "),onChange:Ye}),c.createElement("input",{className:"inline-block ml",type:"button",value:"Start recognition",disabled:Ee||!Q||0===Q.length,onClick:o})),N.isMobile?Q.map((function(e,t){return c.createElement("img",{alt:"tbd",className:"img-full max-width-100 block",key:"".concat(e,"-").concat(t),src:e})})):c.createElement("div",{className:"flex-container center"},Q.map((function(e,t){return c.createElement("img",{alt:"tbd",className:"img-full max-width-45 flex-1",key:"".concat(e,"-").concat(t),src:e})}))),Pe&&0!==Pe.length?c.createElement(c.Fragment,null,c.createElement("div",{className:"center"},c.createElement("h2",null,"Results"),Pe.map((function(e,n){return t(n)})))):null)}()),c.createElement(c.Fragment,null,c.createElement("div",{className:"mt2 text-center"},"Developed by"," ",c.createElement("a",{href:H,rel:"noopener noreferrer",title:"GitHub page for repository",target:"_blank"},"sebranly")," ","(PSN:"," ",c.createElement("a",{href:"https://crashteamranking.com/members/siblingbling/tt/",rel:"noopener noreferrer",title:"Crash Team Ranking for ZouGui28",target:"_blank"},"ZouGui28"),") with \u2764\ufe0f"),c.createElement("div",{className:"mt2 text-center"},"Website version ".concat("1.0.3")))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(ie,null),","),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[155,1,2]]]);
//# sourceMappingURL=main.3a30e7ec.chunk.js.map