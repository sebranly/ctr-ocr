(this["webpackJsonpctr-ocr"]=this["webpackJsonpctr-ocr"]||[]).push([[0],{157:function(e,t,n){e.exports=n(398)},162:function(e,t,n){},163:function(e,t,n){},201:function(e,t){},203:function(e,t){},228:function(e,t){},289:function(e,t){},291:function(e,t){},398:function(e,t,n){"use strict";n.r(t);var a,r,c=n(0),l=n.n(c),o=n(150),i=n.n(o),s=(n(162),n(14)),u=n(7),m=n(2),f=n.n(m),h=n(25),d=n(48),g=n(77),b=(n(163),n(78)),p=n(80);!function(e){e.Position="position",e.Time="time",e.Username="username",e.All="all"}(a||(a={})),function(e){e.NotStarted="not_started",e.Started="started",e.Done="done"}(r||(r={}));var v=n(153),E=n.n(v),y=n(81),k=n.n(y),w=n(156),x=n.n(w),N=n(154),j=n.n(N),O=n(49),P="https://".concat("sebranly",".github.io"),C="https://github.com/".concat("sebranly","/").concat("ctr-ocr"),S="".concat(C,"/blob/main/doc/guide/").concat("en","/"),_="".concat(P,"/json/").concat("ctr-ocr","/players.json"),A="https://raw.githubusercontent.com/".concat("sebranly","/").concat("ctr-ocr","/main/src/img/examples/"),T="".concat(C,"/tree/main/src/img/examples/full-event/"),F="".concat(P,"/").concat("ctr-ocr"),G="image/jpeg",U="image/png",M=n(155),I=n.n(M),L=function(e,t){var n=t.filter((function(e){return!!e})),a=1/0,r=e;return n.forEach((function(t){var n=I.a.get(e,t);n<a&&(a=n,r=t)})),r},J=function(e,t){for(var n=e.charCodeAt(0),a=t.charCodeAt(0),r=[],c=n;c<=a;c+=1)r.push(String.fromCharCode(c));return r},z=function(e,t){if(!e||!t)return 1;var n=e.toLowerCase(),a=t.toLowerCase();return n===a?0:n>a?1:-1},R=n(18),W=function(e,t){for(var n=[],a=e;a<=t;a+=1)n.push(a);return n},B=function(e,t){return Math.floor(e*t)},D=function(){return W(0,9).join("")},q=function(){var e=J("A","Z").join(""),t=J("a","z").join(""),n="".concat(t).concat(e);return"".concat(n).concat(D(),":-_. ")},H=function(e){return e&&0!==e.length?e.filter((function(e){return!!e})).sort().join("\n"):""},Z=function(e){return e?e.split("\n").filter((function(e){return!!e})):[]},Y=function(e,t,n){if(!e)return[];var a=Z(e);if(!n||!t)return a;var r=Z(t);return[].concat(Object(s.a)(a),Object(s.a)(r))},X=function(e){var t=a.Position,n=a.Time,r=a.Username;switch(e){case t:return{tessedit_char_whitelist:W(1,8).join(""),tessedit_pageseg_mode:"10"};case r:return{tessedit_char_whitelist:q(),tessedit_pageseg_mode:"7"};case n:default:return{tessedit_char_whitelist:"".concat(D(),":-"),tessedit_pageseg_mode:"7"}}},$=function(e){return 0===e?[]:W(1,e).map((function(e){return"Team ".concat(e)}))},K=function(e){return e&&"png"===e.toLowerCase()?U:G},Q=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0,r=e.width,c=e.height,l=B(.64,r),o=B(.265,c),i=B(.27,r),s=B(.425,c);if(n===a.All){var u=t/8,m={height:B(u,s),left:l,top:o,width:i};return m}var f=.73,h=.03,d=.27,g=.1,b=1-f-h,p={top:B(t/8,s),height:B(1/8,s)},v=o+p.top,E=p.height;if(n===a.Position){var y={height:E,left:l,top:v,width:B(g,i)};return y}var k=l+B(f,i),w=B(b,i),x=l+B(d,i),N=B(1-b-d-h,i),j=n===a.Time,O=j?k:x,P=j?w:N,C={height:E,left:O,top:v,width:P};return C},V=function(e){return e?e.split(".")[0]:""},ee=function(e){return 0===e.length?[]:1===e.length?e:e.sort((function(e,t){var n=e.name,a=t.name;return function(e,t){var n=/[^a-zA-Z]/g,a=/[^0-9]/g,r=e.replace(n,""),c=t.replace(n,"");if(r===c){var l=parseInt(e.replace(a,""),10),o=parseInt(t.replace(a,""),10);return l===o?0:l>o?1:-1}return r>c?1:-1}(V(n),V(a))}))},te=function(){var e=function(e){var t=function(e){var t="".concat(e);return c.createElement("option",{key:e,label:t,value:e},t)};return c.createElement("tbody",null,Te[e].map((function(n,a){var r,l,o=n.position,i=n.username,s="".concat(o,"-").concat(i);return c.createElement("tr",{key:s},c.createElement("td",null,function(e){if(e<1)return"".concat(e);if([11,12,13].includes(e))return"".concat(e,"th");var t=e%10;return"".concat(e,1===t?"st":2===t?"nd":3===t?"rd":"th")}(o)),Ye&&c.createElement("td",null,(r=i,(l=Me)&&Z(l).includes(r)?"\ud83d\udc64":"\ud83e\udd16")),c.createElement("td",null,c.createElement("select",{onChange:ht(e,a),value:i},function(){var e=Z(Me).sort(z);if(!Ye)return e.map(t);var n=Z(ze).sort(z);return c.createElement(c.Fragment,null,c.createElement("optgroup",{key:"human",label:"Human"},e.map(t)),c.createElement("optgroup",{key:"cpus",label:"CPUs"},n.map(t)))}())))})))},t=function(t){var n="Race ".concat(t+1),a=function(e){var t={correct:!1,errMsg:""};return e.some((function(e){return!e}))?(t.errMsg="At least one username is missing",t):Object(R.uniq)(e).length!==e.length?(t.errMsg="At least one username is duplicated",t):(t.correct=!0,t)}(Te[t].map((function(e){return e.username})));return c.createElement("div",{key:t},c.createElement("h3",null,n),function(e){if(!fe||fe.length<=e)return null;var t=O.isMobile?"img-show max-width-100":"img-show max-width-45";return c.createElement("img",{alt:"Cropped Results",className:t,src:fe[e]})}(t),c.createElement("div",{className:"flex-container results"},function(t){return c.createElement("table",{className:"flex-1"},c.createElement("thead",null,c.createElement("tr",null,c.createElement("th",null,"Position"),Ye&&c.createElement("th",null,"Type"),c.createElement("th",null,"Name"))),e(t))}(t)),!a.correct&&c.createElement("div",{className:"red"},a.errMsg))},n=function(){return Ye?c.createElement("div",{className:"text-center mb"},"Teams are not available when CPUs are activated"):c.createElement(c.Fragment,null,c.createElement("select",{disabled:Ne,onChange:mt,value:nt},bt.map((function(e){var t=e===be?"FFA":"".concat(e," teams");return c.createElement("option",{key:e,label:t,value:e},t)}))),i())},l=function(e){return function(t){var n=t.currentTarget.value,a=Object(g.a)(Object(g.a)({},lt),{},Object(d.a)({},e,n));ot(a)}},o=function(e){var t=function(e,t,n){var a=n[e];if(!a)return"black";switch(t.indexOf(a)){case 0:return"blue";case 1:return"red";case 2:return"green";case 3:return"orange";case 4:return"purple";case 5:return"brown";case 6:return"grey";default:return"black"}}(e,Qe,lt),n="inline float-left ".concat(t);return c.createElement("li",{className:"block",key:e},c.createElement("div",{className:n},e),c.createElement("div",{className:"ml inline float-right"},function(e){return Qe.map((function(t){var n="".concat(e,"-").concat(t),a=lt[e]===t;return c.createElement("div",{className:"ml inline",key:n},c.createElement("input",{type:"radio",disabled:Ne,id:n,name:e,value:t,checked:a,onChange:l(e)}),c.createElement("label",{htmlFor:n},t))}))}(e)))},i=function(){if(Ye)return null;if(nt===be)return c.createElement("div",{className:"ml block mb"},"Free For All means there is no need to set up teams!");var e=yt.isWarning?"orange":"red";return c.createElement(c.Fragment,null,c.createElement("ul",{className:"text-center no-padding mt2"},c.createElement("div",{className:"inline-block"},Et.map(o)),!yt.correct&&c.createElement("div",{className:e},yt.errMsg)))},m=function(){if(!De||0===Object.keys(De).length)return c.createElement("div",{className:"text-center mb"},"Loading CPUs...");var e="".concat(S,"CPUs.md"),t=Object.keys(De),n=st?"Automatically activated bots because ".concat(it," human player(s) was/were filled out of a total of ").concat(be," players"):"Check this if there were bots during the race";return c.createElement(c.Fragment,null,c.createElement("div",{className:"text-center mb"},c.createElement("input",{name:"includeCpuPlayers",type:"checkbox",checked:Ye,onChange:dt,disabled:st||Ne}),c.createElement("div",{className:"ml inline"},n)),Ye&&c.createElement(c.Fragment,null,c.createElement("div",{className:"text-center mb"},"Bots are automatically determined based on the language and cannot be edited"),c.createElement("div",{className:"ml block mb"},"For more information, please refer to the"," ",c.createElement("a",{href:e,rel:"noopener noreferrer",title:"Guide about CPUs",target:"_blank"},"CPUs guide")),c.createElement("div",{className:"inline mr"},"Language in images"),c.createElement("select",{disabled:Ne,onChange:ft,value:ye},t.map((function(e){var t="".concat(e);return c.createElement("option",{key:e,label:t,value:e},t)}))),c.createElement("textarea",{className:"textarea-".concat(pt),disabled:!0,placeholder:"Loading CPUs...",rows:8,value:ze})))},v=function(){var e=Object(h.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Se(!0),je(!1),fetch(_).then((function(e){return e.json()})).then((function(e){qe(e),Re(H(e.en))}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),y=function(){var e=Object(h.a)(f.a.mark((function e(){var t,n,c,l,o,i,s,u;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Ce){e.next=2;break}return e.abrupt("return");case 2:return je(!0),B(r.Started),te("Initialization..."),Fe([]),he([]),t=Object(p.createScheduler)(),n=Object(p.createWorker)({}),t.addWorker(n),e.next=12,n.load();case 12:return e.next=14,n.loadLanguage("eng");case 14:return e.next=16,n.initialize("eng");case 16:return c=X(a.Username),e.next=19,n.setParameters(c);case 19:l=W(0,be-1),o=function(){var e=Object(h.a)(f.a.mark((function e(n,a,r,c){var l,o,i,s,u,m,h,d,g,b,p;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l=t,o=Q(r,n,a),i=r.extension,s=K(i),u=c.crop(o.left,o.top,o.width,o.height),m={count:2,type:s},e.next=8,u.getBufferAsync(s);case 8:return h=e.sent,e.next=11,E()(h,m).then((function(e){return[e[0].rgb(),e[1].rgb()]}));case 11:return d=e.sent,g=d[0][0]<d[1][0]&&d[0][1]<d[1][1]&&d[0][2]<d[1][2],b=g?u.invert():u,e.next=16,b.getBufferAsync(s);case 16:return p=e.sent,e.abrupt("return",l.addJob("recognize",p));case 18:case"end":return e.stop()}}),e)})));return function(t,n,a,r){return e.apply(this,arguments)}}(),i=[],s=[],u=0;case 24:if(!(u<ie.length)){e.next=35;break}return e.prev=25,e.delegateYield(f.a.mark((function e(){var t,n,r,c,m,h,d,g,b,p,v,E,y,w,x,N,j;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="Image ".concat(u+1," out of ").concat(ie.length,"..."),te(t),e.next=5,k.a.read(ie[u]);case 5:return n=e.sent,r=n.bitmap.height,c=r>1e3?n.resize(k.a.AUTO,1e3):n,m=c.rotate(-6.2),h=m.bitmap.height,d=m.bitmap.width,g=m.getExtension(),p=Q(b={height:h,extension:g,width:d},be,a.All),v=m.clone(),v.crop(p.left,p.top,p.width,p.height).getBase64(G,(function(e,t){s.push(t)})),E=m.grayscale(),y=l.map((function(e){return o(e,a.Username,b,E.clone())})),e.next=32,Promise.all(y);case 32:w=e.sent,x=w.map((function(e){return e.data.text.replaceAll("\n","").replaceAll(" ","")})),N=[],j=Y(Me,ze,Ye),l.forEach((function(e){var t=x[e],n={username:L(t,j),position:e+1};N.push(n)})),i.push(N);case 39:case"end":return e.stop()}}),e)}))(),"t0",27);case 27:e.next=32;break;case 29:e.prev=29,e.t1=e.catch(25),e.t1;case 32:u++,e.next=24;break;case 35:return Fe(i),he(s),B(r.Done),te(""),e.next=41,t.terminate();case 41:case"end":return e.stop()}}),e,null,[[25,29]])})));return function(){return e.apply(this,arguments)}}(),w=x()(),N=w.width,P=w.height,M=c.useState(r.NotStarted),I=Object(u.a)(M,2),J=I[0],B=I[1],D=c.useState(""),q=Object(u.a)(D,2),V=q[0],te=q[1],ne=c.useState([]),ae=Object(u.a)(ne,2),re=ae[0],ce=ae[1],le=c.useState([]),oe=Object(u.a)(le,2),ie=oe[0],se=oe[1],ue=c.useState([]),me=Object(u.a)(ue,2),fe=me[0],he=me[1],de=c.useState(8),ge=Object(u.a)(de,2),be=ge[0],pe=ge[1],ve=c.useState("en"),Ee=Object(u.a)(ve,2),ye=Ee[0],ke=Ee[1],we=c.useState(!0),xe=Object(u.a)(we,2),Ne=xe[0],je=xe[1],Oe=c.useState(!1),Pe=Object(u.a)(Oe,2),Ce=Pe[0],Se=Pe[1],_e=c.useState([]),Ae=Object(u.a)(_e,2),Te=Ae[0],Fe=Ae[1],Ge=c.useState(""),Ue=Object(u.a)(Ge,2),Me=Ue[0],Ie=Ue[1],Le=c.useState("Loading CPUs..."),Je=Object(u.a)(Le,2),ze=Je[0],Re=Je[1],We=c.useState({}),Be=Object(u.a)(We,2),De=Be[0],qe=Be[1],He=c.useState(!1),Ze=Object(u.a)(He,2),Ye=Ze[0],Xe=Ze[1],$e=c.useState($(2)),Ke=Object(u.a)($e,2),Qe=Ke[0],Ve=Ke[1],et=c.useState(2),tt=Object(u.a)(et,2),nt=tt[0],at=tt[1],rt=c.useState({}),ct=Object(u.a)(rt,2),lt=ct[0],ot=ct[1],it=Object(R.uniq)(Z(Me)).length,st=it<be;c.useEffect((function(){v()}),[]),c.useEffect((function(){if(!(re.length<1)){var e=[];ee(re).forEach((function(t){e.push(URL.createObjectURL(t))})),se(e)}}),[re]),c.useEffect((function(){st&&!Ye&&Xe(!0)}),[st,Ye]);var ut=function(e){ce(Object(s.a)(e.target.files)),Fe([])},mt=function(e){var t=Number(e.target.value),n=$(t);at(t),Ve(n),ot({})},ft=function(e){ke(e.target.value),Re(H(De[e.target.value]))},ht=function(e,t){return function(n){if(Te&&!(Te.length<e)){var a=Object(s.a)(Te);a[e][t].username=n.target.value,Fe(a)}}},dt=function(e){Xe(e.target.checked)},gt=W(2,8),bt=function(e){return[0,1,2].includes(e)?[e]:Object(R.uniq)([e].concat(Object(s.a)(W(2,e-1).sort())))}(be),pt=O.isMobile?"mobile":"desktop",vt=!Ne||Te&&0!==Te.length?"bg-white":"bg-grey",Et=Object(R.uniq)(Z(Me)).sort(z),yt=function(e,t,n){var a={correct:!1,errMsg:""},r=[],c=[],l=[];return e.forEach((function(e){var a=n[e];a||r.push(e),t.includes(a)||c.push(e),t.includes(a)&&l.push(a)})),r.length>0?(a.errMsg="The following players have no assigned team: ".concat(r.join(", ")),a.isWarning=!0,a):c.length>0?(a.errMsg="The following players have an invalid team: ".concat(c.join(", ")),a):1===Object(R.uniq)(l).length?(a.errMsg="You cannot have all players under the same team",a):(a.correct=!0,a)}(Et,Qe,lt);return c.createElement(b.b,null,c.createElement(b.a,null,c.createElement("title",null,"Crash Team Results"),c.createElement("link",{rel:"canonical",href:F})),c.createElement("div",{className:"main"},c.createElement("h1",null,"Crash Team Results"),c.createElement("div",{className:"w3-light-grey"}),J===r.Done&&c.createElement(j.a,{width:N,height:P,numberOfPieces:800,recycle:!1}),c.createElement("div",{className:"center main-content-".concat(pt," ").concat(vt)},J!==r.Started?null:c.createElement("div",{className:"progress-bar"},c.createElement("div",{className:"progress-bar-value"}),c.createElement("div",{className:"progress-bar-text"},V)),c.createElement("h2",null,"Introduction"),c.createElement("div",{className:"text-center mb"},"Please enter information from top to bottom for a smooth experience"),c.createElement("div",{className:"text-center mb"},"At the end, we'll produce the Lorenzi markdown for you"),c.createElement("h2",null,"Players"),c.createElement("h3",null,"Number of players"),c.createElement("div",{className:"text-center mb"},"This includes CPUs if any"),c.createElement("select",{disabled:Ne,onChange:function(e){pe(Number(e.target.value)),Ie(""),at(2),Ve($(2)),ot({})},value:be},gt.map((function(e){var t="".concat(e," players");return c.createElement("option",{key:e,label:t,value:e},t)}))),c.createElement("h3",null,"Human Players"),c.createElement("div",{className:"text-center mb"},"Type all human players present in the races. Type one username per line."),c.createElement("textarea",{className:"textarea-".concat(pt),disabled:Ne,placeholder:"Hy\xe8ne_JurassX\nAlexiz\nColonel_Hay\nTATANE",rows:be,value:Me,onChange:function(e){Ie(e.currentTarget.value),at(2),Ve($(2)),ot({})}}),0===it?null:c.createElement(c.Fragment,null,c.createElement(c.Fragment,null,c.createElement("h3",null,"CPUs"),m()),c.createElement(c.Fragment,null,c.createElement("h3",null,"Teams"),n()),function(){var e="".concat(A,"IMG1.JPG"),t="".concat(A,"IMG1.PNG"),n="".concat(S,"Images.md");return Ye||nt===be||yt.correct?c.createElement(c.Fragment,null,c.createElement("h2",null,"Images"),c.createElement("div",{className:"text-center mb"},c.createElement("div",{className:"ml block mb bold"},"Screenshots will be ordered alphabetically by name"),c.createElement("div",{className:"ml block mb"},"Select screenshots in JPG/JPEG or PNG format, taken right when Returning to Lobby was around 14 seconds"),c.createElement("div",{className:"ml block mb"},"Examples of valid screenshots:"," ",c.createElement("a",{href:e,rel:"noopener noreferrer",title:"Example of valid JPEG screenshot",target:"_blank"},"JPG/JPEG")," ","and"," ",c.createElement("a",{href:t,rel:"noopener noreferrer",title:"Example of valid PNG screenshot",target:"_blank"},"PNG")),c.createElement("div",{className:"ml block mb"},"You can upload multiple images at once, as in this"," ",c.createElement("a",{href:T,rel:"noopener noreferrer",title:"Example of a valid 10-race event",target:"_blank"},"10-race example")),c.createElement("div",{className:"ml block mb"},"For more information, please refer to the"," ",c.createElement("a",{href:n,rel:"noopener noreferrer",title:"Guide about Images",target:"_blank"},"images guide")),c.createElement("input",{className:"inline mt",disabled:Ne,type:"file",multiple:!0,accept:[G,U].join(", "),onChange:ut}))):null}(),O.isMobile?ie.map((function(e,t){return c.createElement("img",{alt:"tbd",className:"img-full max-width-100 block",key:"".concat(e,"-").concat(t),src:e})})):c.createElement("div",{className:"flex-container center"},ie.map((function(e,t){return c.createElement("img",{alt:"tbd",className:"img-full max-width-45 flex-1",key:"".concat(e,"-").concat(t),src:e})}))),function(){if(!Ye&&nt!==be&&!yt.correct)return null;var e=J===r.Done?"orange":"red",t="ml block mb bold ".concat(e),n=J===r.Done?"Images were analyzed successfully. Please check the results below are correct. Feel free to tweak any mistake below.":"Please ensure all the information entered above is correct, as none of it can be edited afterwards.";return c.createElement("div",{className:"text-center mb"},c.createElement("div",{className:t},n),c.createElement("input",{className:"inline-block ml",type:"button",value:"Get results",disabled:Ne||!ie||0===ie.length,onClick:y}))}(),Te&&0!==Te.length?c.createElement(c.Fragment,null,c.createElement("div",{className:"center"},c.createElement("h2",null,"Results"),Te.map((function(e,n){return t(n)})))):null)),c.createElement(c.Fragment,null,c.createElement("div",{className:"mt2 text-center"},"Developed by"," ",c.createElement("a",{href:C,rel:"noopener noreferrer",title:"GitHub page for repository",target:"_blank"},"sebranly")," ","(PSN:"," ",c.createElement("a",{href:"https://crashteamranking.com/members/siblingbling/tt/",rel:"noopener noreferrer",title:"Crash Team Ranking for ZouGui28",target:"_blank"},"ZouGui28"),") with \u2764\ufe0f"),c.createElement("div",{className:"mt2 text-center"},"Website version ".concat("1.0.4")))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(te,null),","),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[157,1,2]]]);
//# sourceMappingURL=main.7c79c11f.chunk.js.map